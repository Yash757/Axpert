<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://code.jquery.com/jquery-3.6.1.js" integrity="sha256-3zlB5s2uwoUzrXK3BT7AX3FyvojsraNFxCc2vC/7pNI=" crossorigin="anonymous"></script>
       <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
    <!-- <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script> -->
    <!------ Include the above in your HEAD tag ---------->    
<style>
html,
body {
    margin: 0;
    padding: 0;
}


body {
    width: 100vw;
    height: 100vh;
    font-family: 'Open sans';
    box-sizing: border-box;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    background: rgba(57, 50, 173, 1)
}

body>* {
    margin: 0;
    padding: 0;
    box-sizing: inherit;
}

.wrapper {
    width: 700px;
    background: #FFF;
    border-radius: 10px;
    box-shadow: 0 25px 70px rgba(0, 0, 0, .05);
    overflow: hidden;
}

h1.title {
    padding: 15px 0;
    margin-left: 25px;
    font-weight: normal;
    color: rgba(57, 50, 173, 1)
}

.form {
    width: 700px;
}

.myform {
    background: #F4F5F7;
    padding: 25px;
    display: grid;
    grid-template-columns: 1fr 1fr;
    grid-gap: 25px
}

.myform label {
    display: block;
    color: #A8AAC5;
    font-weight: bold;
    font-size: .8rem;
    margin-bottom: 10px;
}

.myform input {
    border: 0;
    outline: 0;
    height: 50px;
    background: #FFF;
    width: 100%;
    border-radius: 5px;
    color: #155BDA;
    font-weight: 700;
    font-size: .9rem;
    text-indent: 15px;
    border: 2px solid transparent;
    transition: border 250ms;
}

.full-width {
    grid-column: -1 / 1
}
</style>
</head>
<body>


    <div class="wrapper">
        <h1 id="output"></h1>
        <div class="form">
            <h1>Employee Details</h1>
           
          <form action="#" class="myform" id="form">
                <div class="control-from">
                    <label for="employeeid">Employee Id *</label>
                    <input type="text" id="empid" placeholder="" required readonly>
                    <div class="error"></div>
                </div>
   
                <div class="control-from">
                    <label for="firstname">First Name *</label>
                    <input type="text" id="fname" placeholder="Enter FirstName">
                    <div class="error"></div>
                </div>
   
                <div class="control-from">
                    <label for="middlename">Middle Name</label>
                    <input type="text" id="mname" placeholder="Enter Middle Name">
                    <div class="error"></div>
                </div>
   
                <div class="control-from">
                    <label for="Lastname">Last Name:</label>
                    <input type="text" id="lname" placeholder="Enter LastName">
                     <div class="error"></div>
                </div>
   
                <div class="control-from">
                    <label for="gender">Gender:</label>
                    <select class="form-select" id="gender">
                        <option value="">-Select Gender-</option>
                        <option value="Male">Male</option>
                        <option value="Female">Female</option>
                        <option value="Other">Other</option>
                    </select>
                    <div class="error"></div>
                </div>
                <div class="control-from">
                    <label for="dateofbirth">Date Of Birth:</label>
                    <input type="date" name="date_birth1"   class="login-input" placeholder="Date Of Birth" id="dob"  max="2006-12-31" min="1970-01-01" Onchange="return findage();"  autofocus>
                    <div class="error"></div>
                </div>
    
                <div class="control-from">
                    <label for="Age">Age</label>
                    <input type="number"  name="age" id="age" pattern = "^\D{0,100}$"  class="login-input" placeholder="Age" autofocus readonly >
                </div>
   
                <div class="button">
                    <button id="save" type="submit" class="btn btn-outline-info shadow" value="Form Submitted Successfully">Save</button>
                    
                 <button type="button" class="btn btn-outline-success shadow" onclick="viewData()">View</button>
                
                </div>
        </form>
        </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.13.2/jquery-ui.min.js" integrity="sha512-57oZ/vW8ANMjR/KQ6Be9v/+/h6bq9/l3f0Oc7vn6qMqyhvPd1cvKBRWWpzu0QoneImqr2SkmO4MSqU+RpHom3Q==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script>
        var getValue = document.querySelector('#save');
var EmployeeId;
var FirstName;
var MiddleName;
var LastName;
var Gender;
var DateOfBirth;
var Age;

var Employeelist = {};


var Emps = [];
var priviosData = JSON.parse(localStorage.getItem("emps"));

try {
  if (priviosData === []) {
    Emps = [];

  } else {
    priviosData.map((a) => {
      console.log(a)
      Emps.push(a);
    })

  }

} catch (error) {

}

//
// console.log(Emps)

getValue.onclick = () => {


  EmployeeId = document.getElementById("empid").value;
  console.error(EmployeeId);

  FirstName = document.getElementById("fname").value;
  console.error(FirstName);

  MiddleName = document.getElementById("mname").value;
  console.error(MiddleName);

  LastName = document.getElementById("lname").value;
  console.error(LastName);

  Gender = document.getElementById("gender").value;
  console.error(Gender);

  DateOfBirth = document.getElementById("dob").value;
  console.error(DateOfBirth);

  let e1 = new Employee(EmployeeId, FirstName, LastName, Gender, DateOfBirth, Age);

  //console.log(e1);

  Employeelist = e1;
  e1.getAge();
  Emps.push(Employeelist);

  //Set Data as a String with JSON format

  localStorage.setItem("emps", JSON.stringify(Emps));


}

// functioonEdit() {
//   for (let index = 0; index < emps.length; index++) {
//     console.log(emps[index]);
//     var row = `
//                     <tr>
//                           <td>${emps[index].empid}</td>
//                           <td>${emps[index].fname}</td>
//                           <td>${emps[index].gender}</td>
//                           <td>${emps[index].dob}</td>
//                           <td>${emps[index].age}</td>
//                           <td>
//             <button id="modify" type = "button" class="btn btn-outline-primary shadow" onClick="onEdit(window.open('/Preeti/Form.html','_self'))"> Edit </button>
//             <button id="remove" type = "button" class="btn btn-outline-danger shadow"> Delete </button>
//           </td>
//                     </tr>
  
// }  
//         `};
//   }
class Employee {


  constructor(empid, fname, lname, gender, dob, age) {
    this.empid = empid;
    this.fname = fname;
    this.lname = lname;
    this.gender = gender;
    this.dob = dob;
    this.age = age;
  }
  // Method
  // fullname() {
  //   return this.empid + this.fname + " " + this.lname + this.gender + this.dob;
  // }
  // // Get Age
  getAge() {
    this.age =
      new Date(new Date() - new Date(this.dob)).getUTCFullYear() - 1970;
  }
}

function viewData() {
  window.open('/Yasar/Report.html', '_self')
}

(function () {
  function IDGenerator() {

    this.length = 3;
    this.timestamp = +new Date;

    var _getRandomInt = function (min, max) {
      return Math.floor(Math.random() * (max - min + 1)) + min;
    }

    this.generate = function () {
      var ts = this.timestamp.toString();
      var parts = ts.split("").reverse();
      var id = "EMP";

      for (var i = 0; i < this.length; ++i) {
        var index = _getRandomInt(0, parts.length - 1);
        id += parts[index];
      }

      return id;
    }
  }
  document.addEventListener("DOMContentLoaded", function () {
    var btn = document.querySelector("#save");
    output = document.querySelector("#empid");
    var generator = new IDGenerator();
    output.value = generator.generate();
    btn.addEventListener("click", function () {
    }, false);

  });
})();

function findage() {
  var PresentDay = new Date();
  var dateOfBirth = (new Date(document.getElementById("dob").value));
  var months = (PresentDay.getMonth() - dateOfBirth.getMonth() +
    (12 * (PresentDay.getFullYear() - dateOfBirth.getFullYear())));
  document.getElementById("age").value = Math.round(months / 12);
}

// function showMessage(input, message, type) {
// 	// get the small element and set the message
// 	const msg = input.parentNode.querySelector("small");
// 	msg.innerText = message;
// 	// update the class for the input
// 	input.className = type ? "success" : "error";
// 	return type;
// }

// function showError(input, message) {
// 	return showMessage(input, message, false);
// }

// function showSuccess(input) {
// 	return showMessage(input, "", true);
// }

// function hasValue(input, message) {
// 	if (input.value.trim() === "") {
// 		return showError(input, message);
// 	}
// 	return showSuccess(input);
// }
	
// const form = document.querySelector("#form");
// const FNAME_REQUIRED = "Please Enter Your FirstName";
// const MNAME_REQUIRED = "Please Enter Your MiddleName";
// const LNAME_REQUIRED = "Please enter Your LastName";
// const GENDER_REQUIRED = "Please enter Your Gender";
// const DOB_REQUIRED =    "Please Enter DateOfBirth";

// 	// validate the form
// let fnameValid = hasValue(form.elements["fname"], FNAME_REQUIRED);
// let mnameValid =hasValue(form.elements['mname'], MNAME_REQUIRED);
// let lnameValid =hasValue(form.elements['lname'], LNAME_REQUIRED);
// let genderValid =hasValue(form.elements['gender'], GENDER_REQUIRED);
// let dobValid =hasValue(form.elements['dob'], DOB_REQUIRED);
// 	// if valid, submit the form.
// 	if (fnameValid && mnameValid && lnameValid && genderValid && dobValid) {
// 		alert("Form submitted Successfully");
//     }


const form = document.getElementById('form');
const fname = document.getElementById('fname');
const gender = document.getElementById('gender');
const dob = document.getElementById('dob');


form.addEventListener('submit', e => {
    e.preventDefault();

    validateInputs();
});

const setError = (element, message) => {
    const inputControl = element.parentElement;
    const errorDisplay = inputControl.querySelector('.error');

    errorDisplay.innerText = message;
    inputControl.classList.add('error');
    inputControl.classList.remove('success')
}

const setSuccess = element => {
    const inputControl = element.parentElement;
    const errorDisplay = inputControl.querySelector('.error');

    errorDisplay.innerText = '';
    inputControl.classList.add('success');
    inputControl.classList.remove('error');
};



const validateInputs = () => {
    const fnameValue = fname.value.trim();
    const genderValue = gender.value.trim();
    const dobValue = dob.value.trim();
   

    if(fnameValue === '') {
        setError(fname, 'FirstName is required');
    } else {
        setSuccess(fname);
    }

    if(genderValue === '') {
        setError(gender, 'Gender is required');
    } else {
        setSuccess(gender);
    }
    if(dobValue === '') {
      setError(dob, 'Date Of Birth is required');
  } else {
      setSuccess(dob);
  }
};
    </script>
</body>
</html>